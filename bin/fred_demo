#!/usr/bin/perl
use strict;
use warnings;

my ($file) = @ARGV;
$file = "demo.txt" if not $file;
open FH, $file or die "Can't readfile $file\n";
while (my $line = <FH>) {
  chomp $line;
  next if not $line;
  next if not ($line=~/^run_fred/ or $line =~/^fred_/ or $line =~/^#/ or $line =~ /^cat /;
  if (not $line =~ /^#/) {
    print "\n% $line\n";
    system "$line &";
    my $return = getc;
  }
  else { 
    print "$line\n";
  }
}
close FH;
exit;
